pipewire-api (2.1.0-1) stable; urgency=medium

  * Wrap all blocking subprocess calls in spawn_blocking for async safety
  * Add internal object cache for pw-cli ID lookups (avoids repeated subprocess calls)
  * Extract shared regex_match into util module (dedup linker/link_manager_cli)
  * Add ParameterValue typed accessors (as_float, as_int, as_bool) and Display impl
  * Mount links router, fix duplicate route, add CORS layer
  * Increase volume clamp from 1.5 to 2.0
  * Add CACHING.md and IMPROVEMENTS.md documentation

 -- HiFiBerry <info@hifiberry.com>  Sun, 08 Feb 2026 12:00:00 +0100

pipewire-api (2.0.9-1) stable; urgency=medium

  * Added intelligent auto-save background task for settings
    - Automatically saves settings every 10 seconds if changes detected
    - Change detection via JSON comparison (avoids unnecessary writes)
    - Initializes from existing settings file to prevent startup save
    - Comprehensive unit and integration tests for auto-save behavior

 -- HiFiBerry <info@hifiberry.com>  Mon, 03 Feb 2026 18:00:00 +0100

pipewire-api (2.0.8-1) stable; urgency=medium

  * Added settings save/restore functionality
    - New /api/v1/settings/save endpoint to save all module settings
    - New /api/v1/settings/restore endpoint to restore saved settings
    - Settings stored in ~/.state/pipewire-api/settings.json
    - Serializes complete SpeakerEQ state (EQ, gains, crossbar, etc.)
    - 7 comprehensive unit tests for settings module

 -- HiFiBerry <info@hifiberry.com>  Mon, 03 Feb 2026 15:00:00 +0100

pipewire-api (2.0.7-1) stable; urgency=medium

  * Added /api/v1/module/speakereq/capabilities endpoint
    - Self-documenting API for filter types and parameter ranges
    - Returns all 9 supported filter types with descriptions
    - Indicates which filters require gain parameter
    - Documents parameter ranges (frequency, gain, Q, etc.) with units

 -- HiFiBerry <info@hifiberry.com>  Mon, 03 Feb 2026 12:00:00 +0100

pipewire-api (2.0.6-1) stable; urgency=medium

  * Added parameter rules configuration system
    - New param-rules.conf file for setting node parameters on API startup
    - Similar to link-rules.conf but for parameter values
    - Supports regex pattern matching for node names
    - Default rule: Enable speakereq[0-9]x[0-9] nodes on startup
    - Installed to /etc/pipewire-api/param-rules.conf

 -- HiFiBerry <info@hifiberry.com>  Sun, 02 Feb 2026 16:00:00 +0100

pipewire-api (2.0.5-1) stable; urgency=medium

  * Added PUT /api/v1/module/speakereq/crossbar endpoint for bulk matrix updates
    - Set entire crossbar matrix in a single request
    - Validates matrix dimensions (2x2) and value ranges (0.0-2.0)
    - More efficient than multiple individual value updates
    - Request: {"matrix": [[1.0, 0.0], [0.0, 1.0]]}

 -- HiFiBerry <info@hifiberry.com>  Sun, 02 Feb 2026 14:30:00 +0100

pipewire-api (2.0.4-1) stable; urgency=medium

  * Added dedicated crossbar/mixing matrix endpoints:
    - GET /api/v1/module/speakereq/crossbar - returns matrix as 2D array
    - PUT /api/v1/module/speakereq/crossbar/:input/:output - set individual values
  * Crossbar matrix now available in convenient 2D format (previously only in status)
  * Added validation for crossbar indices and value ranges (0.0-2.0)

 -- HiFiBerry <info@hifiberry.com>  Sun, 02 Feb 2026 14:00:00 +0100

pipewire-api (2.0.3-1) stable; urgency=medium

  * Added /api/v1/version endpoint returning package and API version
  * Version consistency improvements:
    - Updated Cargo.toml and VERSION file to match debian package version
    - Added build-time version consistency check to prevent mismatches
  * Build script enhancements:
    - Added check_version_consistency() function
    - Validates Cargo.toml, VERSION file, and debian/changelog match
    - Build fails early if versions are inconsistent

 -- HiFiBerry <info@hifiberry.com>  Sun, 02 Feb 2026 13:40:00 +0100

pipewire-api (2.0.2-1) stable; urgency=medium

  * Graph improvements:
    - Changed to vertical layout (sources at top, sinks at bottom)
    - Combined filter-chain input/output nodes into single visual elements
    - Added connected clients to the graph with dashed edges
    - Filtered out internal PipeWire/WirePlumber clients from graph
    - Filtered out driver nodes (Dummy-Driver, Freewheel-Driver)
    - Removed devices and legend for cleaner visualization
  * Added NodeTypeClassification with Driver type detection
  * Added is_internal_client() to filter protocol-native pipewire/wireplumber clients
  * API consistency: Moved module endpoints from /api/module to /api/v1/module
    - RIAA: /api/v1/module/riaa/*
    - SpeakerEQ: /api/v1/module/speakereq/*

 -- HiFiBerry <info@hifiberry.com>  Sat, 01 Feb 2026 18:00:00 +0100

pipewire-api (2.0.1-1) stable; urgency=medium

  * Fixed flaky speakereq tests caused by non-deterministic node lookup
  * Replaced find_node_by_prefix with find_node_by_match using regex patterns
  * SpeakerEQ node lookup now uses pattern "speakereq[0-9]+x[0-9]+" to avoid
    matching stream nodes like "speakereq2x2.output"
  * Added node_pattern field to NodeState for configurable regex matching
  * Removed unused native PipeWire API code (pipewire_client.rs, pod_parser.rs)
  * Removed pipewire, libspa, libspa-sys dependencies from Cargo.toml
  * All 105 Python API tests passing consistently

 -- HiFiBerry <info@hifiberry.com>  Sat, 01 Feb 2026 16:00:00 +0100

pipewire-api (2.0.0-1) stable; urgency=medium

  * MAJOR VERSION: Breaking API and architecture changes
  * Replaced native PipeWire API with CLI tools for all operations
  * Volume control now uses wpctl instead of native API
  * Link management now uses pwlink instead of native API
  * Parameter operations now use pw-cli instead of native API
  * Removed filtered /ls endpoints (/ls/nodes, /ls/devices, etc.)
  * Moved SpeakerEQ API from /api/v1/speakereq to /api/module/speakereq
  * Added parameter caching with /api/module/speakereq/refresh endpoint
  * Added /api/module/speakereq/default endpoint to reset all parameters
  * Fixed pw-cli parameter format to use array structure for SPA Structs
  * Improved error handling and validation throughout API
  * Enhanced documentation with complete API examples
  * All Python API tests passing (89 tests)

 -- HiFiBerry <info@hifiberry.com>  Sat, 01 Feb 2026 14:00:00 +0100

pipewire-api (1.0.9-1) stable; urgency=medium

  * New unified volume API supporting both devices and sinks
  * GET /api/v1/volume endpoint to list all volumes (devices and sinks)
  * GET /api/v1/volume/:id to get volume for specific device or sink
  * PUT /api/v1/volume/:id to set volume for device or sink
  * POST /api/v1/volume/save to save all current volumes to state file
  * POST /api/v1/volume/save/:id to save specific volume to state file
  * Automatic detection of object type (device vs sink)
  * Devices use Route parameters with channelVolumes
  * Sinks use Props parameters with volume property
  * Added object_type field to distinguish "device" from "sink"
  * Renamed device-volumes.conf to volume.conf
  * Renamed DeviceVolumeRule to VolumeRule with 'object' field
  * Volume config now works for both devices and sinks at startup
  * Volume startup configuration uses unified set_volume_by_id API
  * Added use_state_file option to volume rules
  * State file at ~/.state/pipewire-api/volume.state for persistent volumes
  * State file volumes take precedence over config when use_state_file is true

 -- HiFiBerry <info@hifiberry.com>  Sat, 01 Feb 2026 10:00:00 +0100

pipewire-api (1.0.8-1) stable; urgency=medium

  * New API endpoint: GET /api/v1/devices to list all devices with volume info
  * Lists all devices including properties and volume for audio devices

 -- HiFiBerry <info@hifiberry.com>  Fri, 31 Jan 2026 17:00:00 +0100

pipewire-api (1.0.7-1) stable; urgency=medium

  * Added pw-route command-line tool for device route volume control
  * New API endpoints: GET /api/v1/devices/:id with volume information
  * New API endpoints: GET/PUT /api/v1/devices/:id/volume for volume control
  * Added pw-props tool for reading and setting node Props parameters
  * Enhanced pod_parser to handle nested Object types in SPA parameters
  * Dynamic properties now included in /api/v1/properties/:id responses
  * Property ID mapping for friendly names (volume, mute, channelVolumes, etc.)
  * Device route volume control via SPA Route parameters
  * Split log_level configuration into info_level and error_level
  * Added device-volumes.conf for setting default device volumes on startup
  * Default volumes applied once at server startup from config file
  * Device matching via regex patterns (similar to link rules)
  * Added device-volumes.conf(5) man page

 -- HiFiBerry <info@hifiberry.com>  Fri, 31 Jan 2026 16:30:00 +0100

pipewire-api (1.0.6-1) stable; urgency=medium

  * Added default link-rules.conf configuration file installed to /etc/pipewire-api/
  * Configuration files now prioritized: user config (~/.config) then system config (/etc)
  * Hardcoded defaults now used only as fallback when no config files exist
  * Fixed compiler warnings (removed unused code)

 -- HiFiBerry <info@hifiberry.com>  Fri, 31 Jan 2026 15:30:00 +0100

pipewire-api (1.0.5-1) stable; urgency=medium

  * Renamed pw-link to link-nodes to avoid conflict with PipeWire's native pw-link tool
  * Added /api/v1/links/status endpoint for monitoring link rule execution
  * Link scheduler now tracks rule execution status (last run time, success/failure counts)
  * Enhanced automatic link management with detailed status reporting

 -- HiFiBerry <info@hifiberry.com>  Fri, 31 Jan 2026 14:00:00 +0100

pipewire-api (1.0.4-1) stable; urgency=medium

  * Added generic PipeWire endpoints for listing and inspecting objects
  * New /api/v1/ls/* endpoints for nodes, devices, ports, links, etc.
  * New /api/v1/properties/* endpoints for object property inspection
  * Added automatic link management system with rule-based monitoring
  * New /api/v1/links/* endpoints for link creation and management
  * Added link-nodes command-line tool for applying link rules
  * Link scheduler with automatic relinking at configurable intervals
  * Configuration file support: /etc/pipewire-api/link-rules.conf
  * User config support: ~/.config/pipewire-api/link-rules.conf
  * Regex-based node matching for flexible link rules
  * Link persistence using object.linger property
  * Duplicate link detection to avoid redundant connections
  * Named links with descriptive object.name properties
  * Comprehensive man pages: pipewire-api(1) and link-rules.conf(5)
  * Updated API documentation with all new endpoints
  * Moved SpeakerEQ endpoints to /api/v1/speakereq/* namespace
  * Added --no-auto-link flag to disable automatic link management

 -- HiFiBerry <info@hifiberry.com>  Sat, 31 Jan 2026 13:00:00 +0100

pipewire-api (1.0.0-1) stable; urgency=medium

  * Initial release of pipewire-api
  * REST API server for PipeWire control
  * Command-line parameter manipulation tool (pw-param)
  * Systemd integration for service management

 -- HiFiBerry <info@hifiberry.com>  Fri, 31 Jan 2026 08:30:00 +0100
