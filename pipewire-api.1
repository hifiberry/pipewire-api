.TH PIPEWIRE-API 1 "January 2026" "pipewire-api" "User Commands"
.SH NAME
pipewire-api \- REST API server for PipeWire audio system control
.SH SYNOPSIS
.B pipewire-api
[\fIOPTIONS\fP]
.SH DESCRIPTION
.B pipewire-api
is a REST API server that provides HTTP access to the PipeWire audio system.
It enables remote control of audio nodes, inspection of PipeWire objects and their
properties, automatic link management between audio nodes, and specialized control
of the SpeakerEQ 2x2 audio filter plugin.
.PP
The server provides three main categories of endpoints:
.IP \(bu 2
\fBGeneric PipeWire endpoints\fP: List and inspect all PipeWire objects (nodes,
devices, ports, links, clients, modules, factories) and their properties.
.IP \(bu 2
\fBLink management endpoints\fP: Create and manage audio links between nodes
with automatic monitoring and relinking capabilities.
.IP \(bu 2
\fBSpeakerEQ endpoints\fP: Control the SpeakerEQ 2x2 plugin's equalizer bands,
gains, crossbar matrix, and delay settings.
.PP
The server features automatic link management with rule-based monitoring that can
detect node changes and recreate connections as needed. Link rules can be configured
via configuration files or through the REST API.
.SH OPTIONS
.TP
.BR \-p ", " \-\-port " \fIPORT\fP"
Specify the TCP port to listen on. Default: \fB2716\fP
.TP
.BR \-\-localhost
Bind only to localhost (127.0.0.1) instead of all interfaces (0.0.0.0).
Use this option when the API should only be accessible locally for security.
.TP
.BR \-\-no\-auto\-link
Disable automatic link management. When this flag is set, the server will not
load link rules, apply startup links, or run the link scheduler. Only the REST
API endpoints will be available.
.TP
.BR \-h ", " \-\-help
Print help information and exit.
.SH AUTOMATIC LINK MANAGEMENT
The server includes a sophisticated link management system that can automatically
create and maintain connections between PipeWire audio nodes.
.SS Link Rules
Link rules are defined in JSON format and specify:
.IP \(bu 2
Source and destination nodes (identified by regex patterns)
.IP \(bu 2
Whether to apply at startup
.IP \(bu 2
How often to check and recreate the link (in seconds)
.PP
Rules are loaded from:
.IP 1. 3
Built-in default rules (e.g., SpeakerEQ to HiFiBerry)
.IP 2. 3
System configuration: \fB/etc/pipewire-api/link-rules.conf\fP
.IP 3. 3
User configuration: \fB~/.config/pipewire-api/link-rules.conf\fP
.SS Link Scheduler
When automatic link management is enabled (default), a background scheduler:
.IP 1. 3
Applies all rules marked with \fBlink_at_startup: true\fP on server startup
.IP 2. 3
Checks every second for rules with \fBrelink_every > 0\fP
.IP 3. 3
Recreates links that don't exist based on the relink interval
.IP 4. 3
Avoids creating duplicate links
.PP
This ensures audio connections remain stable even when nodes are added,
removed, or restarted.
.SH API ENDPOINTS
The REST API is available at \fBhttp://localhost:2716/api/v1\fP by default.
All responses are in JSON format.
.SS Generic PipeWire Endpoints
.TP
.B GET /ls
List all PipeWire objects
.TP
.B GET /ls/nodes
List all audio/video processing nodes
.TP
.B GET /ls/devices
List all audio/video hardware devices
.TP
.B GET /ls/ports
List all connection endpoints (ports)
.TP
.B GET /ls/links
List all active connections (links)
.TP
.B GET /ls/clients
List all connected applications
.TP
.B GET /ls/modules
List all PipeWire modules
.TP
.B GET /ls/factories
List all object factories
.TP
.B GET /properties
Get all objects with their complete property dictionaries
.TP
.B GET /properties/:id
Get properties for a specific object by ID
.SS Link Management Endpoints
.TP
.B GET /links
List all active links with detailed connection information
.TP
.B POST /links/apply
Apply a single link rule (JSON body)
.TP
.B POST /links/batch
Apply multiple link rules at once
.TP
.B GET /links/default
Get the default link rules configured in the server
.TP
.B POST /links/apply-defaults
Apply all default link rules
.SS SpeakerEQ Endpoints
.TP
.B GET /speakereq/structure
Get the plugin structure (blocks, I/O count, enabled state)
.TP
.B GET /speakereq/io
Get input/output channel count
.TP
.B GET /speakereq/status
Get complete plugin status (all settings in one call)
.TP
.B GET /speakereq/eq/:block/:band
Get a specific EQ band configuration
.TP
.B PUT /speakereq/eq/:block/:band
Set a specific EQ band (type, frequency, Q, gain)
.TP
.B PUT /speakereq/eq/:block/:band/enabled
Enable or disable a specific EQ band
.TP
.B PUT /speakereq/eq/:block/clear
Clear all EQ bands in a block
.TP
.B GET /speakereq/gain/master
Get master gain level
.TP
.B PUT /speakereq/gain/master
Set master gain level
.TP
.B GET /speakereq/enable
Get plugin enable status
.TP
.B PUT /speakereq/enable
Enable or disable the plugin
.PP
For complete API documentation with request/response examples, see the
\fBapi.md\fP file included with the distribution or available at
the project documentation site.
.SH EXAMPLES
.SS Start server on default port (2716)
.EX
pipewire-api
.EE
.SS Start server on custom port, localhost only
.EX
pipewire-api --port 8080 --localhost
.EE
.SS Start server without automatic link management
.EX
pipewire-api --no-auto-link
.EE
.SS Enable debug logging
.EX
RUST_LOG=debug pipewire-api
.EE
.SS Query all nodes via API
.EX
curl http://localhost:2716/api/v1/ls/nodes
.EE
.SS Get properties for a specific object
.EX
curl http://localhost:2716/api/v1/properties/45
.EE
.SS Apply a link rule via API
.EX
curl -X POST http://localhost:2716/api/v1/links/apply \\
  -H "Content-Type: application/json" \\
  -d '{
    "name": "Browser to Speakers",
    "source": {"node.name": "^firefox.*"},
    "destination": {"node.name": "^alsa_output"},
    "type": "link",
    "link_at_startup": true,
    "relink_every": 5
  }'
.EE
.SS Set SpeakerEQ master gain to -3dB
.EX
curl -X PUT http://localhost:2716/api/v1/speakereq/gain/master \\
  -H "Content-Type: application/json" \\
  -d '{"gain_db": -3.0}'
.EE
.SH ENVIRONMENT
.TP
.B RUST_LOG
Controls logging verbosity. Valid values:
.RS
.IP \(bu 2
\fBerror\fP: Only errors
.IP \(bu 2
\fBwarn\fP: Warnings and errors
.IP \(bu 2
\fBinfo\fP: Informational messages (recommended)
.IP \(bu 2
\fBdebug\fP: Detailed debugging information
.IP \(bu 2
\fBtrace\fP: Very verbose tracing
.RE
.IP
Example: \fBRUST_LOG=info pipewire-api\fP
.SH FILES
.TP
.B /etc/pipewire-api/link-rules.conf
System-wide link rules configuration
.TP
.B ~/.config/pipewire-api/link-rules.conf
User-specific link rules configuration
.SH DEPENDENCIES
The server requires:
.IP \(bu 2
A running PipeWire daemon
.IP \(bu 2
The \fBspeakereq2x2\fP node to be available (for SpeakerEQ endpoints)
.IP \(bu 2
Network connectivity to the specified port
.PP
If the \fBspeakereq2x2\fP node is not found, the server will fail to start.
Use \fB--no-auto-link\fP if you only need generic PipeWire endpoints.
.SH DIAGNOSTICS
.TP
.B "Failed to find speakereq2x2 node"
The SpeakerEQ plugin is not loaded in PipeWire. Verify the plugin is installed
and configured in PipeWire's configuration. Use \fBpw-dump\fP to list available nodes.
.TP
.B "Failed to bind to port"
The specified port is already in use or you don't have permission to bind to it.
Try a different port with \fB--port\fP or check if another instance is running.
.TP
.B "Link creation failed"
Common causes:
.RS
.IP \(bu 2
Source or destination node doesn't exist
.IP \(bu 2
Regex patterns don't match any nodes
.IP \(bu 2
Port count mismatch between source and destination
.IP \(bu 2
Ports are already linked
.RE
.IP
Use \fBRUST_LOG=debug\fP for detailed diagnostics and \fBpw-dump\fP to inspect
available nodes and their properties.
.SH SECURITY CONSIDERATIONS
By default, the server binds to all network interfaces (0.0.0.0), making it
accessible from any machine that can reach the host. For security:
.IP \(bu 2
Use \fB--localhost\fP when remote access is not needed
.IP \(bu 2
Configure firewall rules to restrict access
.IP \(bu 2
Consider using a reverse proxy with authentication
.IP \(bu 2
Be aware that the API provides full control over audio routing
.SH BUGS
Report bugs to the HiFiBerry issue tracker or via email to info@hifiberry.com
.SH SEE ALSO
.BR link-rules.conf (5),
.BR pw-link (1),
.BR pw-dump (1),
.BR pipewire (1),
.BR pw-cli (1)
.PP
Complete API documentation: \fBapi.md\fP
.PP
PipeWire documentation: https://docs.pipewire.org/
.SH AUTHORS
HiFiBerry <info@hifiberry.com>
