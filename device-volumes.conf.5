.TH DEVICE-VOLUMES.CONF 5 "January 2026" "pipewire-api" "File Formats Manual"
.SH NAME
device-volumes.conf \- configuration file for pipewire-api default device volumes
.SH SYNOPSIS
.nf
/etc/pipewire-api/device-volumes.conf
~/.config/pipewire-api/device-volumes.conf
.fi
.SH DESCRIPTION
The
.B device-volumes.conf
file configures default volume levels for PipeWire devices. Volumes are applied
once when the pipewire-api server starts. This allows setting hardware volume
levels automatically on system startup.
.PP
Rules are loaded from two locations (in order of precedence):
.IP \(bu 2
User-specific: \fB~/.config/pipewire-api/device-volumes.conf\fP (highest priority)
.IP \(bu 2
System-wide: \fB/etc/pipewire-api/device-volumes.conf\fP (fallback)
.PP
Both files are loaded and their rules are combined.
.SH FILE FORMAT
The configuration file uses JSON format containing an array of device volume rule objects.
.SS Basic Structure
.EX
[
  {
    "name": "HiFiBerry DAC Default Volume",
    "device": {
      "device.name": "alsa_card\\\\.platform-soc_.*_sound"
    },
    "volume": 0.75
  }
]
.EE
.SH RULE PROPERTIES
.SS Required Properties
.TP
.B name
(string) Descriptive name for this volume rule. Used for logging purposes.
.TP
.B device
(object) Identifies the target device using property matching. Must contain at least
one device property key-value pair where values are regular expression patterns.
Common properties include:
.RS
.IP \(bu 2
\fBdevice.name\fP: Device name (e.g., "alsa_card.usb-Audio_Device")
.IP \(bu 2
\fBdevice.description\fP: Human-readable description
.IP \(bu 2
\fBdevice.api\fP: API used (e.g., "alsa", "v4l2")
.IP \(bu 2
\fBdevice.nick\fP: Short device nickname
.IP \(bu 2
\fBmedia.class\fP: Media class (e.g., "Audio/Device")
.RE
.IP
All specified properties must match for the rule to apply to a device.
.TP
.B volume
(number) Volume level to set, from 0.0 to 1.0 (linear scale):
.RS
.IP \(bu 2
\fB0.0\fP: Mute (silent)
.IP \(bu 2
\fB0.5\fP: 50% volume
.IP \(bu 2
\fB1.0\fP: Maximum volume (100%)
.RE
.SH PATTERN MATCHING
Device properties are matched using \fBregular expressions\fP. Common patterns:
.TP
.B ^device_name$
Exact match
.TP
.B ^prefix
Starts with "prefix"
.TP
.B substring
Contains "substring"
.TP
.B .*
Matches any characters (wildcard)
.TP
.B device[12]
Matches "device1" or "device2"
.PP
Remember to escape special regex characters with backslashes:
.RS
.IP \(bu 2
\fB.\fP becomes \fB\\\\.\fP (to match a literal dot)
.IP \(bu 2
\fB[\fP becomes \fB\\\\[\fP
.IP \(bu 2
Use raw JSON strings or double-escape: \fB"\\\\\\\\."\fP
.RE
.SH EXAMPLES
.SS Set volume for all ALSA devices
.EX
{
  "name": "All ALSA Devices",
  "device": {
    "device.api": "alsa"
  },
  "volume": 0.8
}
.EE
.SS Set volume for USB audio devices
.EX
{
  "name": "USB Audio Devices",
  "device": {
    "device.name": "alsa_card\\\\.usb-.*"
  },
  "volume": 0.9
}
.EE
.SS Set volume for specific HiFiBerry device
.EX
{
  "name": "HiFiBerry DAC+ ADC",
  "device": {
    "device.name": "alsa_card\\\\.platform-soc_.*_sound",
    "device.nick": "snd_rpi_hifiberry_dacplusadc"
  },
  "volume": 0.75
}
.EE
.SS Multiple devices with different volumes
.EX
[
  {
    "name": "Internal Audio",
    "device": {
      "device.name": "alsa_card\\\\.pci-.*"
    },
    "volume": 0.6
  },
  {
    "name": "External USB DAC",
    "device": {
      "device.name": "alsa_card\\\\.usb-DAC.*"
    },
    "volume": 0.85
  }
]
.EE
.SH VOLUME APPLICATION
.IP \(bu 2
Volumes are applied \fBonce\fP at server startup
.IP \(bu 2
Changes to the config file require a server restart
.IP \(bu 2
Volumes are set via Device Route parameters (hardware volume control)
.IP \(bu 2
If a device doesn't support volume control, the setting is silently ignored
.IP \(bu 2
The linear volume scale (0.0-1.0) maps directly to hardware levels
.SH DISCOVERING DEVICES
To find device IDs and properties:
.PP
.EX
# List all devices
pw-cli ls Device

# Show device details
pw-dump | jq '.[] | select(.type == "PipeWire:Interface:Device")'

# Check current volume
pw-cli enum-params <device-id> Route | grep channelVolumes
.EE
.SH TESTING
Verify volume was applied:
.PP
.EX
# Via PipeWire CLI (replace 56 with your device ID)
pw-cli enum-params 56 Route | grep channelVolumes

# Via REST API
curl http://localhost:2716/api/v1/devices/56/volume
.EE
.SH NOTES
.IP \(bu 2
Volume changes are not persistent across PipeWire restarts unless configured here
.IP \(bu 2
The REST API can be used to change volumes dynamically at runtime
.IP \(bu 2
Some devices may not support software volume control
.IP \(bu 2
Changes made via wpctl or other tools will override these defaults
.SH FILES
.TP
.B /etc/pipewire-api/device-volumes.conf
System-wide default device volumes configuration
.TP
.B ~/.config/pipewire-api/device-volumes.conf
User-specific device volumes configuration (overrides system config)
.SH SEE ALSO
.BR pipewire-api (1),
.BR link-rules.conf (5),
.BR pw-cli (1),
.BR pw-dump (1),
.BR wpctl (1)
.SH AUTHOR
HiFiBerry
